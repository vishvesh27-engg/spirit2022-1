<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/platform.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
      integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>Register</title>
  </head>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Outfit&display=swap');
    body{
      background-color: #F2F0F7;
      background-image: url("data:image/svg+xml,%3Csvg width='1440' height='946' viewBox='0 0 1440 946' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M445.5 776.5L875.5 0H1532L1623 157H1007.5L574 946H-87L-182 776.5H445.5Z' fill='%23F2F0F7'/%3E%3C/svg%3E");
    }
    .bigContainer {

      height: auto;
      width: 100wh;
      overflow-x: hidden;
      margin: 0%;
    }
    .cont {
      margin-right: 10%;
      margin-left: 10%;
      margin-top: 5%;
      display: flex;
      margin-bottom: 0%;
    }
    .cont1 {
      margin-top: 5%;
      flex-direction: row;
      margin-right: 4%;
      line-height: 0%;
      width: 45%;
    }
    .cont1 > h6 {
      margin: 0.5%;
      width: 31%;
      height: auto;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 500;
      font-size: 150%;
      line-height: 32px;
      color: #11002c;
      white-space: nowrap;
    }
    .cont1 > h4 {
      margin: 0.5%;
      width: 65%;
      height: auto;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 600;
      font-size: 250%;
      line-height: 64px;
      color: #11002c;
      white-space: nowrap;
    }
    .cont1 > p {
      margin-top: 3%;
      width: 85%;
      height: auto;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 400;
      font-size: 18px;
      line-height: 28px;
      color: #11002c;
    }
    .cont2 {
      padding: 2%;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      width: auto;
      height: 100%;
      background: #ffffff;
      
      box-shadow: 10px 50px 50px rgba(20, 11, 34, 0.05);
      border-radius: 12px;
      margin-top: 6%;
      margin-right: 3%;
      margin-left: 10%;
      margin-bottom: 15%;
      line-height: 0%;
    }
    .cont2 > h1 {
      margin: 0%;
      width: 331px;
      height: 59px;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 600;
      font-size: 38.6626px;
      line-height: 59px;
      color: #282938;
      margin-left: 2%;
    }
    .cont2 > p {
      margin: 0%;
      width: 100%;
      height: 52px;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 400;
      font-size: 14.7286px;
      line-height: 26px;
      color: #000000;
    }
    .cardd {
      line-height: 0%;
      margin: 5%;
    }
    .cardd > h6 {
      margin: 0%;
      width: 54.27px;
      height: 30px;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 500;
      font-size: 16.5697px;
      line-height: 29px;
      text-align: left;
    }
    /* .TextBox {
      width: 100%;
      height: 40px;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 400;
      font-size: 14.7286px;
      line-height: 26px;
      text-align: left;
      color: #000000;
      border-color: rgb(175, 167, 167);
      box-shadow: 1px  rgb(175, 167, 167);
      border-radius: 5px;
    }
    .TextMsg {
      width: 100%;
      height: 19vh;
      color: #000000;
      border-color: rgb(175, 167, 167);
      box-shadow: 1px rgb(175, 167, 167);
      border-radius: 5px;
    } */
    ::placeholder {
      padding-left: 1%;
      padding-top: 5%;
      padding-bottom: 5%;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 400;
      margin-left: 10%;
      font-size: 14.7286px;
      line-height: 26px;
      text-align: left;
      color: #000000;
    }
    .bttns{
        flex-direction: column;
        display: flex;
        margin-right: 1%;
        margin-bottom: 5%;
    }
    .mbutton{
      display: flex;
      align-items: center;
      justify-content: center;
     
    }
    .buttonlogin{
      width: 45% !important;
      padding: 4% !important;
      font-size: 95% !important;
      cursor: pointer;
      border-radius: 50px !important;
      background-color: #301956 !important;
    }
    .buttonlogin:hover{
      opacity: 0.9;
    }
    .aboutUs {
      width: 45vw;
      height: auto;
    }
    .icon {
      display: flex;
      height: auto;
      width: 75%;
      margin: 3%;
    }
    
    .c1 {
      flex-direction: column;
      margin: 4%;
      height: 10%;
      width: 10%;
    }
    .c1 > i {
      margin: 2%;
      padding: 15%;
      height: 10%;
      width: auto;
      font-size: 100%;
      background-color: #11002c;
      color: white;
      box-shadow: 0% 5% 10% rgba(181, 67, 0, 0.05);
      border-radius: 19%;
    }
    .c1>i:hover{
      font-size: 120%;
      background-color: #260f4a;
    }
    .c2 {
      margin: 3%;
      margin-left: 10px;
      flex-direction: column;
    }
    .c2_child {
      flex-direction: row;
      margin: 2%;
      margin-left: 0%;
      margin-right: 1%;
     
    }
    .c2 > h6 {
      flex-direction: row;
      width: 100%;
      height: auto;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 500;
      font-size: 3vh;
      line-height: 28px;
      color: #301956;
      text-decoration: #301956 !important;
    }
    .c2>h6>a{
      text-decoration:none !important;
    }
    .c2 > h2 {
      white-space: nowrap;
      flex-direction: row;
      margin: 3%;
      margin-left: 2px;
      width: 100%;
      height: 5vh;
      font-family: "Outfit";
      font-style: normal;
      font-weight: 500;
      font-size: 2.5vh;
      line-height: 28px;
      color: #11002c;
      text-decoration: none !important;
    }
    .TextBox {
  
  /* margin-left: 2%; */
  margin-right: 2%;
  font-size: 25px;
  border-radius: 7.3643px;
  font-family: 'Outfit';
  font-weight: 400px;
  width: 100%;
  height: 8vh;
  border-color: rgb(141, 127, 106);
  border-width: 1px;
}
#msgBox {
  
  /* margin-left: 2%; */
  margin-right: 2%;
  font-size: 25px;
  border-radius: 7.3643px;
  font-family: 'Outfit';
  font-weight: 400px;
  width: 100%;
  height: 19vh;
  border-color: rgb(141, 127, 106);
  border-width: 1px;
}

#button2 {
  margin-top: 5%;
  display: flex;
  /* position: relative;
  left: 4px;
  top: 50px; */
  margin-left: 1%;
  margin-right: 2.5%;
  color: white;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  padding: 13.8081px 46.9474px;
  gap: 9.9px;
  border-color: white;
  height: 58.91px;
  border-color: white;
  background: #11002C;
  border-radius: 12px;
  font-size: 15px;
}
#button2:hover{
  opacity: 0.9;
}
#success{
  /* margin: 2%; */
  padding: 1%;
  display: flex;
  justify-content: center;
  align-content: center;
}
.myanchortag{
  display: flex;
  align-content: center;
  justify-content: center;
  text-decoration: none;
  padding: 4%;
  /* color: #11002C; */

}
    @media only screen and (max-width:980px) {
      .cont{
        display: flex;
        flex-direction: column;
      }
      .cont1 {
      
      margin-right: 4%;
      line-height: 0%;
      width: 100%;
    }
    .cont2 {
      
      justify-content: center;
      align-items: center;
      width: 100%;
      height: auto;
      background: #ffffff;
      
      box-shadow: 0px 9.58449px 19.169px rgba(69, 0, 181, 0.05);
      border-radius: 12px;
      margin-top: 10%;
      margin-right: 2%;
      margin-left: 0%;
      margin-bottom: 15%;
      line-height: 0%;
    }
    .c1{
      display: flex;
      align-items: center;
    }
    .c2 {
      margin: 3%;
      margin-top: 0%;
      margin-left: 20px;
      flex-direction: column;
    }
    .c2 > h2 {
      white-space: nowrap;
    }
    .c2 > h6 {
      white-space: nowrap;
    }

   
    }
  </style>
  <body>
    <div class="bigContainer">
      <div class="cont">
        <div class="cont1">
          <h6>Contact Us</h6>
          <h4>Get In Touch</h4>
          <p>
            Got questions? Got feedback? Got suggestions? Drop us a line below
            and we promise to get back to you!
          </p>
          <div class="aboutUs">
            <span class="icon">
              <div class="c1">
                <i class="fa-solid fa-envelope"></i>
              </div>

              <div class="c2">
                <h6 class="c2_child">
                  <a href="/Mail">
                  Mail
                </a></h6>
                <h2 class="c2_child">Contact Us</h2>
              </div>
            </span>
            <span class="icon">
              <div class="c1">
                <i class="fa-solid fa-phone "></i>
              </div>

              <div class="c2">
                <h6 class="c2_child">
                  <a href="/Callpage">
                    Phone
                  </a>
                  </h6>
                <h2 class="c2_child">Call Us</h2>
              </div>
            </span>
            <span class="icon">
              <div class="c1">
                <i class="fa-solid fa-location-arrow"></i>
              </div>

              <div class="c2">
                <h6 class="c2_child">
                  <a href="/LocateUs">
                  Locate Us
                </a></h6>
                <h2 class="c2_child">Locate Us</h2>
              </div>
            </span>
          </div>
        </div>
        <div class="cont2">
          <h1>Register</h1>
          <p>
            No time to draft Email? Just drop us a message here and we will
            revert back :)
          </p>
          <div style="color:green;" class="register-partition" id="success">
                success
        </div>
          <div class="cardd">
            <h6>Name</h6>
            
            <input type="email" name="email" style="font-size: 15px;font-weight: 400;" id="NAME"
                     placeholder="  Enter your name" class="TextBox">
          </div>
          <div class="cardd">
            <h6>Email</h6>
           

            <input type="email" name="email" style="font-size: 15px;font-weight: 400;" id="mail"
                     placeholder=" Enter your email" class="TextBox">
          </div>
          <div class="cardd">
            <h6>Password</h6>
           
            <input type="password" name="email" style="font-size: 15px;font-weight: 400;" id="PASS"
                     placeholder="  Enter your password" class="TextBox">
          </div>
          <div class="cardd">
            <h6>Contact Number</h6>
            
            <input type="tel" name="email" style="font-size: 15px;font-weight: 400;" id="PHN"
                     placeholder="  Enter your phone number" class="TextBox">
          </div>
          <div class="mbutton">
            <a href="#" class="btn btn-primary btn-lg active buttonlogin" role="button" aria-pressed="true" id="register">Register</a>
          </div>
          <div class="bttns">
           
              <button type="button" class="btn btn-primary btn-block " id="button2">
                Login with Google
              </button>
            
          </div>
          <div style="color:red;" class="register-partition" id="errors">
            
        </div>
        <a href="#" class="myanchortag">Already have an account? Login.</a>
        </div>
      </div>
    </div>
    <%- include('../footer') -%>
  </body>
  <script>
//     let show_pass_status = false;
//      document.getElementById("show_pass").addEventListener('click', show_pass)
//     let show_pass_checkbox =document.getElementById("show_pass");

// function show_pass(){
//     if(show_pass_status === false){
//         document.getElementById('Passwordenter').type= "text";
//         //show_pass_button.innerHTML="✓";
//         show_pass_checkbox.style.color = "#000000"; 
//         show_pass_status = true;
//     }else{
//         document.getElementById('Passwordenter').type= "password";
//         //show_pass_button.innerHTML="&nbsp&nbsp";
//         show_pass_checkbox.style.color = "#ffffff"; 
//         show_pass_status = false;
//     }   
// }
        

        // var remember=document.getElementById("Remember");
        // function rem(){remember.innerHTML="✓";}


        const form = document.getElementById('register')
        form.addEventListener('click', signupemail)
        
        async function signupemail(event) {
            event.preventDefault()
            const email = document.getElementById('mail').value
            const password = document.getElementById('PASS').value
            const phno = document.getElementById('PHN').value
            const collegename = document.getElementById('NAME').value
            const username = document.getElementById('NAME').value
            const provider = "email";
            if(email&&password&&phno&&collegename&&username){
                
            }
            else{
                document.getElementById("errors").innerHTML="Fields are empty"
                return
            }
            const result = await fetch('/authapi/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    username,
                    password,
                    email,
                    collegename,
                    phno
                })
            }).then((res) => res.json())

            if (result.status === 'ok') {
               
                
                document.getElementById("success").innerHTML='Success. Check your mail and activate your account'
                
            } else {
                document.getElementById("errors").innerHTML=result.error
            }
        }

        //calling register apis to register using google
        async function registergoogle(googleUser) {
            var profile = googleUser.getBasicProfile();
            //console.log('ID: ' + profile.getId());
            const username=profile.getName();
            //console.log('Image URL: ' + profile.getImageUrl());
            const email = profile.getEmail();
            const provider="google";
            console.log('Email: ' + profile.getEmail());
               const result = await fetch('/authapi/registerwithgofb', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                email,
                username,
                provider
            })
            }).then((res) => res.json())
         
            if (result.status === 'ok') {
                var auth2 = gapi.auth2.getAuthInstance();
                auth2.signOut()
                //window.location.replace(`/profile/get/${result.data._id}`);
                
                document.getElementById("success").innerHTML='Success. Check your mail and activate your account'
                
            } else {
                var auth2 = gapi.auth2.getAuthInstance();
                auth2.signOut()
                console.log(result.error)
                document.getElementById("errors").innerHTML=result.error
            }
        }
        
       
          

        //google-signup  
        var googleUser = {};
        var startApp = function() {
            gapi.load('auth2', function(){
            // Retrieve the singleton for the GoogleAuth library and set up the client.
            auth2 = gapi.auth2.init({
                client_id: '3577006987-f2e34fou4ef4avubvd7lkea870ghj3fq.apps.googleusercontent.com',
                cookiepolicy: 'single_host_origin',
                plugin_name:"chat27"
                // Request scopes in addition to 'profile' and 'email'
                //scope: 'additional_scope'
            });
            attachSignin(document.getElementById('button2'));
            });
        }

        function attachSignin(element) {
            console.log(element.id);
            auth2.attachClickHandler(element, {},
                function(googleUser) {
                /* document.getElementById('').innerText = "Signed in: " +
                    googleUser.getBasicProfile().getName(); */
                    registergoogle(googleUser);
                }, function(error) {
                alert(JSON.stringify(error, undefined, 2));
            });
        }
        startApp()
    </script>
</html>